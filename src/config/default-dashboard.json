{
  "version": "1.0.0",
  "queueProviders": {
    "redis-bullmq": {
      "type": "bullmq",
      "displayName": "Redis BullMQ",
      "connection": {
        "instances": "default:localhost:6379"
      }
    }
  },
  "queueQueries": {
    "jobFilters": {
      "all_queues_v1-0-0": {
        "provider": "redis-bullmq"
      },
      "failed_jobs_v1-0-0": {
        "provider": "redis-bullmq",
        "status": "failed"
      },
      "processing_jobs_v1-0-0": {
        "provider": "redis-bullmq",
        "status": "processing"
      },
      "delayed_jobs_v1-0-0": {
        "provider": "redis-bullmq",
        "status": "delayed"
      }
    },
    "queueSpecific": {
      "email_queue_failed_v1-0-0": {
        "provider": "redis-bullmq",
        "queue": "emails",
        "status": "failed",
        "limit": 50
      }
    }
  },
  "kubeQueries": {
    "podFilters": {
      "all_pods_v1-0-0": {
        "resourceType": "pods"
      },
      "running_pods_v1-0-0": {
        "resourceType": "pods",
        "fieldSelector": "status.phase=Running"
      },
      "failed_pods_v1-0-0": {
        "resourceType": "pods",
        "fieldSelector": "status.phase=Failed"
      },
      "pending_pods_v1-0-0": {
        "resourceType": "pods",
        "fieldSelector": "status.phase=Pending"
      },
      "kube_system_pods_v1-0-0": {
        "resourceType": "pods",
        "namespace": "kube-system"
      }
    },
    "serviceFilters": {
      "all_services_v1-0-0": {
        "resourceType": "services"
      },
      "loadbalancer_services_v1-0-0": {
        "resourceType": "services",
        "fieldSelector": "spec.type=LoadBalancer"
      },
      "nodeport_services_v1-0-0": {
        "resourceType": "services",
        "fieldSelector": "spec.type=NodePort"
      }
    },
    "nodeFilters": {
      "all_nodes_v1-0-0": {
        "resourceType": "nodes"
      },
      "ready_nodes_v1-0-0": {
        "resourceType": "nodes",
        "fieldSelector": "status.conditions[?(@.type=='Ready')].status=True"
      }
    }
  },
  "queries": {
    "nodeMetrics": {
      "cpu_usage_v1-0-0": "100 - (avg(rate(node_cpu_seconds_total{mode=\"idle\"}[5m])) * 100)",
      "memory_total_v1-0-0": "node_memory_MemTotal_bytes",
      "memory_available_v1-0-0": "node_memory_MemAvailable_bytes"
    },
    "clusterMetrics": {
      "node_count_v1-0-0": "count(kube_node_info)",
      "running_pods_v1-0-0": "count(kube_pod_status_phase{phase=\"Running\"})",
      "total_pods_v1-0-0": "count(kube_pod_info)",
      "total_cpu_cores_v1-0-0": "sum(kube_node_status_capacity{resource=\"cpu\"})",
      "total_memory_bytes_v1-0-0": "sum(kube_node_status_capacity{resource=\"memory\"})"
    },
    "podMetrics": {
      "cpu_rate_v1-0-0": "sum(rate(container_cpu_usage_seconds_total{pod=\"{{pod}}\",namespace=\"{{namespace}}\",container!=\"POD\",container!=\"\"}[5m])) by (pod)",
      "memory_usage_v1-0-0": "sum(container_memory_working_set_bytes{pod=\"{{pod}}\",namespace=\"{{namespace}}\",container!=\"POD\",container!=\"\"}) by (pod)"
    },
    "containerMetrics": {
      "cpu_by_container_v1-0-0": "sum(rate(container_cpu_usage_seconds_total{pod=\"{{pod}}\",namespace=\"{{namespace}}\",container!=\"POD\",container!=\"\"}[5m])) by (container)",
      "memory_by_container_v1-0-0": "sum(container_memory_working_set_bytes{pod=\"{{pod}}\",namespace=\"{{namespace}}\",container!=\"POD\",container!=\"\"}) by (container)"
    }
  },
  "pages": [
    {
      "id": "overview",
      "name": "Overview",
      "icon": "LayoutDashboard",
      "layout": [
        {
          "i": "cluster-metrics-1",
          "x": 0,
          "y": 0,
          "w": 6,
          "h": 4,
          "component": "PrometheusNodeMetrics",
          "config": {
            "title": "Cluster Metrics",
            "showHeader": true,
            "queries": {
              "cpuUsage": "promQueries.nodeMetrics.cpu_usage_v1-0-0",
              "memoryTotal": "promQueries.nodeMetrics.memory_total_v1-0-0",
              "memoryAvailable": "promQueries.nodeMetrics.memory_available_v1-0-0",
              "nodeCount": "promQueries.clusterMetrics.node_count_v1-0-0",
              "runningPods": "promQueries.clusterMetrics.running_pods_v1-0-0",
              "totalPods": "promQueries.clusterMetrics.total_pods_v1-0-0",
              "totalCpu": "promQueries.clusterMetrics.total_cpu_cores_v1-0-0",
              "totalMemory": "promQueries.clusterMetrics.total_memory_bytes_v1-0-0"
            }
          },
          "minW": 4,
          "minH": 3
        },
        {
          "i": "bullmq-monitor-1",
          "x": 0,
          "y": 4,
          "w": 6,
          "h": 4,
          "component": "BullMQMonitor",
          "config": {
            "title": "BullMQ Queues",
            "showHeader": true
          },
          "minW": 4,
          "minH": 3
        },
        {
          "i": "pod-explorer-1",
          "x": 6,
          "y": 0,
          "w": 6,
          "h": 8,
          "component": "KubeNamespacePodList",
          "config": {
            "title": "All Pods",
            "query": {
              "resourceType": "pods"
            },
            "showHeader": true,
            "showMetrics": true,
            "showLogs": true
          },
          "minW": 5,
          "minH": 6
        }
      ]
    }
  ]
}
